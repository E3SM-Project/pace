{% extends "layout.html" %}

{% block topscripts %}
<title>PACE: Model Timing View</title>
        <style>
            #dataInfo{
                border:.01in solid;
                position: absolute;
                left:20.5%;
                width:80%;
                background-image:url(/static/img/ornlLeaf.svg); 
                background-position: center;
                background-repeat: no-repeat;
                background-size: auto;
            }
            #dataList{
                overflow: scroll;
                width:20%;
                position: absolute;
                resize:vertical;
                left:0px;
            }
            ul{
                list-style-type: none;
            }
            #backAndNodeId{
                position: absolute;
                left:20.5%;
        
            }
            #mtMain{
                font-family: monospace;
                margin-bottom:70%
            }
            .unused{
                display: none;
            }
            #compareSelectDiv{
                width:60%;
                height:60%;
                position:absolute;
                top:20%;
                left:20%;
                box-shadow:0px 5px 5px gray;
                background-color:white;
                opacity:0;
                display:none;
                border-radius:10px;
                font-family:arial;
                text-align:center;
                overflow:scroll;
            }
            .compareDiv{
                width:10em;
                height:7em;
                display:inline-block;
                margin-right:1em;
                border:.1em solid gray;
                border-radius:10px;
            }
            </style>
{% endblock %}


{% block content %}
<!--Author: Zachary Mitchell
    Purpose: View your prevsiously parsed model_timing files in style!
    Summarize any scope of timeNodes with sum or averages, and with any value you want! (Wallclock, min/max, etc)-->
        <div id="mtMain">
            <div>
                <select id="valueName" onclick="(comparisonMode.on?comparisonMode.viewChart(comparisonMode.exp.currentEntry.name):changeGraph(currExp.currentEntry) )"></select>
                <select id="mode" class="unused" onclick="(comparisonMode.on?comparisonMode.viewChart(comparisonMode.exp.currentEntry.name):changeGraph(currExp.currentEntry) )">
                    <option value="sum" selected>Sum</option>
                    <option value="avg">Average</option>
                </select>
                <select id="threadSelect"></select>
                <button id="compareButton" onclick="compDivObj.toggle()">Compare</button>
                <input type="checkbox" onclick="stackedCharts = this.checked;(comparisonMode.on?comparisonMode.viewChart(comparisonMode.exp.currentEntry.name):changeGraph(currExp.currentEntry) );" checked>Stacked bars</input>
            </div>
            <div id="dataInfo"><canvas id="chartTag"></canvas></div>
            <div id="dataList"><button id="summaryButton">Summary</button><div id="listContent"></div></div>
            <span id="backAndNodeId"><button id="backButton"><-Back</button><span id="nodeId" style="font-family: monospace"></span></span>
        </div>
    <div id="compareSelectDiv">
    <h2>Select the threads you wish to compare.</h2><br>
    <p><button onclick='compDivObj.makeExp()'>Add</button></p>
    <div id="compDivBody"></div>
    <p style="text-align:center"><button id="compareGo" onclick="compDivObj.scan()">Go!</button></p>
    </div>
{% endblock %}

{% block bottomscripts %}
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
	<script src="/static/js/domFunctions.js"></script>
	<script src="/static/js/modelTiming.js"></script>
	<script src="/static/js/paceLoadScreen.js"></script>
	<script>//Fire up the summary:
    var expData = undefined;
    {{exp|safe}}
    /*$(document).ajaxError(()=>{
        if(expGetFunc.length > 0){
            alert("Could not find this experiment");
            //location.replace("/exps");
        }
    });*/
	$(document).ready(()=>{
			animate();
			expGetFunc.push(()=>{
                currExp = expList[0];animate(false);currExp.view();
                if(window.location.hash=="")
                    window.location.hash="#summary";
                else window.onhashchange();
                });
            if(expData!=undefined)
                getExperiment(expData[0],expData[1]);
			else getExperiment(-1,"0000");
			});</script>
{% endblock %}